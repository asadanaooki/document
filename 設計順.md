# 小規模 EC 開発ロードマップ

> **目的**: 学習効率を最大化しながら、“まず動く” 小規模 EC (MVP) を段階的に完成させる。  
> **スタイル**: 1 画面（機能） = 1 〜 1.5 週間を目安。各ステージで **新しい概念を 1 つ以上** 習得する。

---

## 1. 必須 ★ / 後回し △ リスト

### 1‑1 ユーザー向け

| 画面 / 機能 | 優先 | 補足 |
|-------------|------|------|
| ログイン／新規登録 | ★ | 最低限 |
| パスワード再設定 (メールリンク) | ★ | CS 地獄を防ぐ |
| 商品一覧・詳細・カート・チェックアウト・注文完了 | ★ | 売買コア |
| 注文履歴 | ★ | ユーザー安心＋CS 対応 |
| プロフィール編集（氏名・電話） | ★ | 住所編集と同ページで OK |
| 配送先住所管理（1 件固定でも可） | ★ | 必須 |
| 支払い方法管理（カード 1 枚） | ★ | MVP なら 1 枚保存で十分 |
| アカウント削除（退会） | ★ | 個人情報保護法対応 |
| FAQ（静的）／お問い合わせフォーム | ★ | メール 1 本送信で可 |
| お気に入り／最近閲覧 | △ | 後回しでも UX 破綻しない |
| 通知設定・会員ランク・レビュー投稿・返品申請・チャットサポート | △ | 小規模なら不要 |
| メール変更／PW 変更 | △ | PW リセットで代替可 |

### 1‑2 管理者向け

| 画面 / 機能 | 優先 | 補足 |
|-------------|------|------|
| 管理ダッシュボード (売上・注文・低在庫) | ★ | 数値 3 つだけ |
| 商品 CRUD（画像 1 枚） | ★ | 価格・在庫更新 |
| 在庫一覧／補充 | ★ | 発送前の数合わせ用 |
| 注文一覧＋ステータス変更 | ★ | CS と物流の最小線 |
| ユーザー一覧（凍結のみ） | ★ | 不正対策 |
| 税率・送料一律設定 | ★ | コード定数でも可 |
| クーポン／キャンペーン／広告／一斉メール | △ | 売上が伸びてから |
| レビュー管理・CSV・メールテンプレ・API トークン・エラーログ UI | △ | 運用で困ってから |

---

## 2. 学び効率重視の 14 ステップ実装順

| # | 学べるコア概念 | 画面 / ルート | 主な習得ポイント | 依存 |
|---|---------------|---------------|------------------|------|
| 0 | ビルド & CI/CD | – | Gradle/Maven・GitHub Actions | – |
| 1 | HTTP GET + ORM | `/products` (一覧) | ルーティング・テンプレ/React ループ | 0 |
| 2 | パラメータルート | `/products/{id}` (詳細) | PathVariable・null ガード | 1 |
| 3 | フォーム CRUD + 画像UP | `/admin/products/new` | POST/PUT・バリデーション・S3/ローカル | 2 |
| 4 | セッション / Cookie | `/cart` | Cookie cartId・Redis JSON・数量変更 | 1,2 |
| 5 | 認証 (Security) | `/login` `/signup` | BCrypt・カート引き継ぎ | 4 |
| 6 | 関連テーブル JOIN | `/checkout` Step‑1 | User↔Address JOIN・配送先選択 | 5 |
| 7 | 取引トランザクション | `/checkout/confirm` | 在庫 `FOR UPDATE`・注文 INSERT | 6 |
| 8 | 状態遷移 / PRG | `/checkout/complete` | PRG パターン・フラッシュスコープ | 7 |
| 9 | 認可 & ページング | `/mypage/orders` | page/size・@PreAuthorize | 8 |
|10 | メール & トークン | パスワード再設定 | UUID トークン・SendGrid/SES | 5 |
|11 | PUT/PATCH 冪等更新 | `/mypage/profile` | DTO↔Entity・冪等 PUT | 9 |
|12 | 管理ロール / 検索 | `/admin/orders` | 検索条件・発送ステータス更新 | 7 |
|13 | 業務オペレーション | `/admin/inventory` | 業務ロック・低在庫一覧 | 12 |
|14 | 例外処理 UX | (購入画面内) | 409 JSON・差分ハイライト | 7 |

---

## 3. ★必須だが 14 ステップに含めていないもの

| 機能 | 後で入れる理由 | 最適タイミング |
|------|---------------|---------------|
| 支払い方法管理（カード 1 枚） | 都度入力で先行可能 | ステップ 8 ➜ 9 の間（決済 SDK と一緒に） |
| アカウント削除（退会） | 発生頻度が低い | ステップ 11 直後 |
| FAQ＆お問い合わせ | コンテンツ中心 | リリース前バッファ週 |
| 管理ダッシュボード | 集計だけ | ステップ 13 ➜ 14 の後 |
| ユーザー凍結（管理） | 不正発生後で可 | 退会機能と同タイミング |

---

## 4. 推奨追加順（15 以降）

15. 支払い方法管理 (カード登録/削除)  
16. 退会 / ユーザー凍結  
17. 管理ダッシュボード (グラフ付カード)  
18. FAQ / お問い合わせフォーム  

---

 ## 5. 画面実装フロー（作成順チェックリスト）

| 順 | 画面 / ルート | 目的 & 主な新概念 |
|----|---------------|------------------|
| 1 | カート `/cart` | Session/Cookie・数量更新 JS |
| 2 | ログイン / 新規登録 `/login` `/signup` | Spring Security 基本認証・カート引き継ぎ |
| 3 | チェックアウト Step‑1 `/checkout` | User↔Address JOIN・フォーム検証 |
| 4 | 注文確認 `/checkout/confirm` | 取引トランザクション・在庫ロック |
| 5 | 購入完了 `/checkout/complete` | PRG パターン・FlashScope |
| 6 | 注文履歴 `/mypage/orders` | 認可・ページング |
| 7 | パスワード再設定 `/reset` | メール送信・UUID トークン |
| 8 | プロフィール / 住所編集 `/mypage/profile` | DTO↔Entity・冪等 PUT |
| 9 | 管理：商品 CRUD `/admin/products` | 画像アップ・ロール認可 |
|10 | 管理：注文一覧 `/admin/orders` | 検索条件・発送ステータス更新 |
|11 | 在庫管理 `/admin/inventory` | 低在庫抽出・業務ロック |
|12 | 管理ダッシュボード `/admin/dashboard` | 集計クエリ・チャート描画 |
|13 | 支払い方法管理 `/mypage/payment` | 決済 SDK 連携 |
|14 | 退会 / ユーザー凍結 | 個人情報削除・管理凍結 UI |
|15 | FAQ / お問い合わせ `/faq` `/contact` | メール送信・静적ページ |
